<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>60é¢˜è®°å¿†åŠ›æŒ‘æˆ˜ï¼ˆè¿›é˜¶ç‰ˆï¼‰</title>
    <style>
        body {
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: #333;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 550px;
            text-align: center;
            transition: all 0.3s;
        }

        h1 { margin-top: 0; color: #4834d4; font-size: 2rem; }
        
        .hidden { display: none !important; }

        /* Buttons */
        .btn {
            background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
            outline: none;
        }
        .btn:active { transform: scale(0.98); }

        /* Stats & Timer */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: #f1f2f6;
            padding: 10px 20px;
            border-radius: 10px;
        }
        .stat-item { font-weight: bold; color: #57606f; }
        
        .timer-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ff6b6b;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 20px auto;
            border: 4px solid #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        /* Question Area */
        .question-area {
            height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #dfe4ea;
            border-radius: 15px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .memory-text {
            font-size: 3.5rem;
            font-weight: 800;
            letter-spacing: 4px;
            color: #2f3542;
            font-family: 'Courier New', Courier, monospace;
        }

        input[type="number"] {
            font-size: 2.2rem;
            padding: 10px;
            width: 80%;
            text-align: center;
            border: 3px solid #a4b0be;
            border-radius: 12px;
            outline: none;
            background: #fff;
        }
        input:focus { border-color: #764ba2; }

        /* Rules List */
        .rules-box {
            text-align: left;
            background: #f1f2f6;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .rules-box li { margin-bottom: 5px; }

        /* Reward Styles */
        .reward-box {
            margin-top: 20px;
            padding: 25px;
            border-radius: 15px;
            color: white;
            font-size: 1.4rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: popIn 0.5s ease;
        }
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .level-1 { background: linear-gradient(to right, #f1c40f, #f39c12); } /* 20 min */
        .level-2 { background: linear-gradient(to right, #2ecc71, #27ae60); } /* 15 min */
        .level-3 { background: linear-gradient(to right, #3498db, #2980b9); } /* 10 min */
        .level-0 { background: linear-gradient(to right, #95a5a6, #7f8c8d); } /* 0 min */

        .difficulty-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.1);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            color: #57606f;
        }

    </style>
</head>
<body>

<div class="container">
    <!-- 1. å¼€å§‹ç•Œé¢ -->
    <div id="start-screen">
        <h1>âš¡ è®°å¿†åŠ›ç‰¹è®­ (è¿›é˜¶)</h1>
        <div class="rules-box">
            <p><strong>æŒ‘æˆ˜è§„åˆ™ï¼š</strong></p>
            <ul>
                <li>å…± <strong>60</strong> é¢˜ï¼Œæ¯é¢˜é™æ—¶ 30 ç§’ã€‚</li>
                <li><strong>éš¾åº¦æå‡ï¼š</strong> 6ä½æ•° -> 7ä½æ•° -> 8ä½æ•°ã€‚</li>
                <hr style="border: 1px dashed #ccc;">
                <li>ğŸ¥‡ <strong>å…¨å¯¹ (60é¢˜)ï¼š</strong> å¥–åŠ± 20 åˆ†é’Ÿ</li>
                <li>ğŸ¥ˆ <strong>é”™5é¢˜å†… (â‰¥55é¢˜)ï¼š</strong> å¥–åŠ± 15 åˆ†é’Ÿ</li>
                <li>ğŸ¥‰ <strong>é”™10é¢˜å†… (â‰¥50é¢˜)ï¼š</strong> å¥–åŠ± 10 åˆ†é’Ÿ</li>
                <li>âŒ <strong>å…¶ä»–ï¼š</strong> æ— å¥–åŠ±</li>
            </ul>
        </div>
        <button class="btn" onclick="startGame()">æ¥å—æŒ‘æˆ˜</button>
    </div>

    <!-- 2. æ¸¸æˆç•Œé¢ -->
    <div id="game-screen" class="hidden">
        <div class="top-bar">
            <span class="stat-item" id="progress-text">è¿›åº¦: 1 / 60</span>
            <span class="stat-item" id="score-text">å¾—åˆ†: 0</span>
        </div>
        
        <div class="timer-circle" id="timer">30</div>

        <div class="question-area">
            <div id="diff-label" class="difficulty-badge">6ä½æ•°éš¾åº¦</div>
            <!-- æ˜¾ç¤ºè®°å¿†å†…å®¹ -->
            <div id="display-number" class="memory-text"></div>
            <!-- è¾“å…¥æ¡† -->
            <input type="number" id="input-answer" class="hidden" placeholder="è¾“å…¥æ•°å­—" onkeydown="handleEnter(event)" autocomplete="off">
            <p id="msg-hint" style="color:#7f8c8d; font-size:0.9rem; margin-top:15px; font-weight: 500;">å‡†å¤‡è®°å¿†...</p>
        </div>

        <button class="btn" id="submit-btn" onclick="checkAnswer()" style="display:none; width: 100%;">æäº¤ç­”æ¡ˆ</button>
    </div>

    <!-- 3. ç»“ç®—ç•Œé¢ -->
    <div id="result-screen" class="hidden">
        <h1>æŒ‘æˆ˜ç»“æŸ</h1>
        <p style="font-size: 1.2rem; color: #57606f;">ä½ çš„æœ€ç»ˆæˆç»©</p>
        <div style="font-size: 4rem; font-weight: bold; color: #2f3542; margin: 10px 0;">
            <span id="final-score">0</span> <span style="font-size: 1.5rem; color:#999;">/ 60</span>
        </div>
        <p id="wrong-count-text" style="color: #e74c3c; font-weight: bold; margin-bottom: 20px;"></p>
        
        <div id="reward-display" class="reward-box"></div>

        <button class="btn" onclick="location.reload()" style="margin-top: 30px;">å†æ¥ä¸€å±€</button>
    </div>
</div>

<script>
    // æ¸¸æˆé…ç½®
    const TOTAL_QUESTIONS = 60;
    const TIME_LIMIT = 30; // æ¯é¢˜æ€»é™æ—¶
    const MEMORY_TIME = 3000; // è®°å¿†æ—¶é—´ 3ç§’ (æ—¶é—´è¶ŠçŸ­ï¼Œå¯¹å¿«é€ŸæŠ“å–èƒ½åŠ›è¦æ±‚è¶Šé«˜)
    
    // çŠ¶æ€å˜é‡
    let currentQuestion = 0;
    let score = 0;
    let currentAnswer = "";
    let timerInterval;
    let timeLeft = TIME_LIMIT;
    
    // DOM å…ƒç´ å¼•ç”¨
    const startScreen = document.getElementById('start-screen');
    const gameScreen = document.getElementById('game-screen');
    const resultScreen = document.getElementById('result-screen');
    const progressText = document.getElementById('progress-text');
    const scoreText = document.getElementById('score-text');
    const timerDisplay = document.getElementById('timer');
    const displayNumber = document.getElementById('display-number');
    const inputAnswer = document.getElementById('input-answer');
    const msgHint = document.getElementById('msg-hint');
    const submitBtn = document.getElementById('submit-btn');
    const diffLabel = document.getElementById('diff-label');

    function startGame() {
        startScreen.classList.add('hidden');
        gameScreen.classList.remove('hidden');
        currentQuestion = 0;
        score = 0;
        updateStats();
        nextQuestion();
    }

    function nextQuestion() {
        if (currentQuestion >= TOTAL_QUESTIONS) {
            endGame();
            return;
        }

        currentQuestion++;
        updateStats();
        
        // é‡ç½®ç•Œé¢
        inputAnswer.value = "";
        inputAnswer.classList.add('hidden');
        submitBtn.style.display = 'none';
        displayNumber.classList.remove('hidden');
        displayNumber.style.filter = "blur(0px)"; // ç¡®ä¿æ¸…æ™°
        msgHint.innerText = "è¯·è®°å¿†...";
        msgHint.style.color = "#7f8c8d";
        
        // éš¾åº¦ç”Ÿæˆé€»è¾‘ (æ ¸å¿ƒä¿®æ”¹)
        let digits = 6;
        if (currentQuestion <= 20) {
            digits = 6; // 1-20é¢˜: 6ä½
            diffLabel.innerText = "å…¥é—¨: 6ä½æ•°";
        } else if (currentQuestion <= 40) {
            digits = 7; // 21-40é¢˜: 7ä½
            diffLabel.innerText = "è¿›é˜¶: 7ä½æ•°";
        } else {
            digits = 8; // 41-60é¢˜: 8ä½
            diffLabel.innerText = "é«˜éš¾: 8ä½æ•°";
        }

        // ç”ŸæˆæŒ‡å®šä½æ•°çš„éšæœºæ•°å­—
        // ä¾‹å¦‚ 6ä½æ•°ï¼š100000 åˆ° 999999
        const min = Math.pow(10, digits - 1);
        const max = Math.pow(10, digits) - 1;
        const randomNum = Math.floor(Math.random() * (max - min + 1)) + min;
        
        currentAnswer = randomNum.toString();
        displayNumber.innerText = currentAnswer;

        // å€’è®¡æ—¶é‡ç½®
        timeLeft = TIME_LIMIT;
        timerDisplay.innerText = timeLeft;
        timerDisplay.style.background = "#ff6b6b";

        // 3ç§’è®°å¿†å€’è®¡æ—¶
        setTimeout(() => {
            displayNumber.classList.add('hidden');
            inputAnswer.classList.remove('hidden');
            inputAnswer.focus();
            submitBtn.style.display = 'block';
            msgHint.innerText = "è¯·è¾“å…¥åˆšæ‰çš„æ•°å­—";
            msgHint.style.color = "#2f3542";
            
            // å¼€å§‹ä½œç­”å€’è®¡æ—¶
            startTimer();
        }, MEMORY_TIME);
    }

    function startTimer() {
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            timerDisplay.innerText = timeLeft;
            
            // å€’è®¡æ—¶é¢œè‰²å˜åŒ–æé†’
            if(timeLeft < 10) {
                timerDisplay.style.background = "#c0392b";
            }

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                checkAnswer(true); // è¶…æ—¶å¼ºåˆ¶æäº¤
            }
        }, 1000);
    }

    function handleEnter(e) {
        if (e.key === "Enter") {
            checkAnswer();
        }
    }

    function checkAnswer(isTimeout = false) {
        clearInterval(timerInterval);
        const userVal = inputAnswer.value.trim();
        
        if (userVal === currentAnswer) {
            score++;
            // ç­”å¯¹å¯ä»¥ç»™ä¸€ç‚¹å¾®å°çš„è§†è§‰åé¦ˆ
        } else {
            // ç­”é”™
        }

        // æçŸ­å»¶è¿Ÿåä¸‹ä¸€é¢˜
        setTimeout(() => {
            nextQuestion();
        }, 200);
    }

    function updateStats() {
        progressText.innerText = `é¢˜å·: ${currentQuestion} / ${TOTAL_QUESTIONS}`;
        scoreText.innerText = `å½“å‰å¾—åˆ†: ${score}`;
    }

    function endGame() {
        gameScreen.classList.add('hidden');
        resultScreen.classList.remove('hidden');
        
        const wrongCount = TOTAL_QUESTIONS - score;
        document.getElementById('final-score').innerText = score;
        document.getElementById('wrong-count-text').innerText = `å…±åšé”™ ${wrongCount} é¢˜`;
        
        const rewardBox = document.getElementById('reward-display');
        
        // æ–°çš„å¥–åŠ±é€»è¾‘
        if (score === 60) {
            // å…¨å¯¹
            rewardBox.className = "reward-box level-1";
            rewardBox.innerHTML = "ğŸ† è®°å¿†å¤§å¸ˆï¼<br><strong>å¥–åŠ± 20 åˆ†é’Ÿ</strong>";
        } else if (wrongCount <= 5) {
            // é”™5é¢˜å†… (>=55åˆ†)
            rewardBox.className = "reward-box level-2";
            rewardBox.innerHTML = "ğŸ¥ˆ éå¸¸ä¼˜ç§€ï¼<br><strong>å¥–åŠ± 15 åˆ†é’Ÿ</strong>";
        } else if (wrongCount <= 10) {
            // é”™10é¢˜å†… (>=50åˆ†)
            rewardBox.className = "reward-box level-3";
            rewardBox.innerHTML = "ğŸ¥‰ è¡¨ç°ä¸é”™ï¼<br><strong>å¥–åŠ± 10 åˆ†é’Ÿ</strong>";
        } else {
            // æ²¡è¾¾åˆ°æ ‡å‡†
            rewardBox.className = "reward-box level-0";
            rewardBox.innerHTML = "âŒ æŒ‘æˆ˜å¤±è´¥<br>æ— å¥–åŠ±ï¼Œè¯·ç»§ç»­åŠªåŠ›";
        }
    }
</script>

</body>
</html>
